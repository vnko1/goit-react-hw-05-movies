"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[379],{589:function(e,t,r){var n=r(689),a=r(87),u=r(184);t.Z=function(e){var t=e.movies,r=(0,n.TH)();return(0,u.jsx)("ul",{children:t.map((function(e){var t=e.title,n=e.id;return(0,u.jsx)("li",{children:(0,u.jsx)(a.rU,{to:"/movies/".concat(n),state:{from:r},children:t})},n)}))})}},379:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var n=r(433),a=r(439),u=r(791),o=r(87),i=r(184),s=function(e){var t=e.setSearchParams,r=(0,u.useState)(""),n=(0,a.Z)(r,2),o=n[0],s=n[1];return(0,i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.trim()&&(t({query:o.trim().toLowerCase()}),s(""))},children:[(0,i.jsx)("input",{type:"text",name:"query",value:o,placeholder:"Search movies",autoComplete:"off",autoFocus:!0,onChange:function(e){var t=e.currentTarget.value;s(t)}}),(0,i.jsx)("button",{type:"submit",children:"Search"})]})},c=r(589),f=r(334),l=r(580),h=function(){var e=(0,u.useState)([]),t=(0,a.Z)(e,2),r=t[0],h=t[1],p=(0,u.useState)(),m=(0,a.Z)(p,2),d=m[0],v=m[1],g=(0,o.lr)(),_=(0,a.Z)(g,2),b=_[0],w=_[1],x=(0,l.ib)(),j=x.errorMessage,y=x.setErrorMessage,Z=x.showLoader,S=x.setShowLoader,L=(0,u.useMemo)((function(){return Object.fromEntries((0,n.Z)(b))}),[b]).query;return(0,u.useEffect)((function(){if(L){var e=new AbortController,t={controller:e,fetchParams:"search/movie",query:L};return y(null),S(!0),(0,l.vw)(t).then((function(e){v(e.results.length);var t=(0,l.Lu)(e.results);h(t)})).catch((function(e){"canceled"!==e.message&&y(e.message)})).finally((function(){S(!1)})),function(){e.abort()}}}),[L,y,S]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s,{setSearchParams:w}),Z&&(0,i.jsx)(f.Z,{}),!!r.length&&(0,i.jsx)(c.Z,{movies:r}),0===d&&(0,i.jsx)("p",{children:"Nothing found"}),!!j&&(0,i.jsx)("p",{children:j})]})}},580:function(e,t,r){r.d(t,{vw:function(){return i},in:function(){return f},Bf:function(){return c},Lu:function(){return s},tK:function(){return l},ib:function(){return m}});var n=r(861),a=r(757),u=r.n(a),o=r(243);o.Z.defaults.baseURL="https://api.themoviedb.org/3/";var i=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n,a,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fetchParams,n=t.query,a=void 0===n?null:n,i=t.controller,e.next=3,(0,o.Z)(r,{signal:i.signal,params:{api_key:"c095a52b18be81f1ee1fe016a8531acc",query:a}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(e){return e.map((function(e){return{title:e.title,id:e.id}}))},c=function(e){var t=e.release_date,r=e.title,n=e.poster_path,a=e.popularity,u=e.backdrop_path,o=e.id,i=e.tagline,s=e.genres,c=e.overview,f=t.split("-"),l=s.map((function(e){return e.name})).join(" ");return{date:f[0],title:r,tagline:i,id:o,poster_path:n,popularity:a,backdrop_path:u,genreList:l,overview:c}},f=function(e){return e.map((function(e){return{id:e.id,name:e.name,original_name:e.original_name,character:e.character,profile_path:e.profile_path}}))},l=function(e){return e.map((function(e){return{author:e.author,content:e.content,id:e.id}}))},h=r(439),p=r(791),m=function(){var e=(0,p.useState)(null),t=(0,h.Z)(e,2),r=t[0],n=t[1],a=(0,p.useState)(!1),u=(0,h.Z)(a,2);return{errorMessage:r,setErrorMessage:n,showLoader:u[0],setShowLoader:u[1]}}}}]);
//# sourceMappingURL=379.4250c8d5.chunk.js.map