"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[415],{6481:function(t,e,r){var n=r(8175),a=r(184);e.Z=function(t){var e=t.column,r=void 0===e?4:e,o=t.height,i=void 0===o?450:o,s=t.width,c=r,u=i,l=void 0===s?300:s,h=u+5,p=l+5,d=Array(3*c).fill(1);return(0,a.jsx)(n.ZP,{speed:1,width:c*p,height:3*h,children:d.map((function(t,e){var r=Math.floor(e/c)*h+35,n=e*p%(c*p);return(0,a.jsx)("rect",{x:n,y:r,rx:"0",ry:"0",width:l,height:u},e)}))})}},7174:function(t,e,r){r.d(e,{Z:function(){return N}});var n=r(7689),a=r(5856),o=r(168),i=r(1087),s=r(6444),c=r(2791),u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},u(t,e)};function l(t){var e=t.className,r=t.counterClockwise,n=t.dashRatio,a=t.pathRadius,o=t.strokeWidth,i=t.style;return(0,c.createElement)("path",{className:e,style:Object.assign({},i,p({pathRadius:a,dashRatio:n,counterClockwise:r})),d:h({pathRadius:a,counterClockwise:r}),strokeWidth:o,fillOpacity:0})}function h(t){var e=t.pathRadius,r=t.counterClockwise?1:0;return"\n      M 50,50\n      m 0,-"+e+"\n      a "+e+","+e+" "+r+" 1 1 0,"+2*e+"\n      a "+e+","+e+" "+r+" 1 1 0,-"+2*e+"\n    "}function p(t){var e=t.counterClockwise,r=t.dashRatio,n=t.pathRadius,a=2*Math.PI*n,o=(1-r)*a;return{strokeDasharray:a+"px "+a+"px",strokeDashoffset:(e?-o:o)+"px"}}var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var t=this.props,e=t.value,r=t.minValue,n=t.maxValue;return(Math.min(Math.max(e,r),n)-r)/(n-r)},e.prototype.render=function(){var t=this.props,e=t.circleRatio,r=t.className,n=t.classes,a=t.counterClockwise,o=t.styles,i=t.strokeWidth,s=t.text,u=this.getPathRadius(),h=this.getPathRatio();return(0,c.createElement)("svg",{className:n.root+" "+r,style:o.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?(0,c.createElement)("circle",{className:n.background,style:o.background,cx:50,cy:50,r:50}):null,(0,c.createElement)(l,{className:n.trail,counterClockwise:a,dashRatio:e,pathRadius:u,strokeWidth:i,style:o.trail}),(0,c.createElement)(l,{className:n.path,counterClockwise:a,dashRatio:h*e,pathRadius:u,strokeWidth:i,style:o.path}),s?(0,c.createElement)("text",{className:n.text,style:o.text,x:50,y:50},s):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(c.Component);function f(t){var e=t.rotation,r=t.strokeLinecap,n=t.textColor,a=t.textSize,o=t.pathColor,i=t.pathTransition,s=t.pathTransitionDuration,c=t.trailColor,u=t.backgroundColor,l=null==e?void 0:"rotate("+e+"turn)",h=null==e?void 0:"center center";return{root:{},path:g({stroke:o,strokeLinecap:r,transform:l,transformOrigin:h,transition:i,transitionDuration:null==s?void 0:s+"s"}),trail:g({stroke:c,strokeLinecap:r,transform:l,transformOrigin:h}),text:g({fill:n,fontSize:a}),background:g({fill:u})}}function g(t){return Object.keys(t).forEach((function(e){null==t[e]&&delete t[e]})),t}var v,m,x,k,b,w,y=r(184),Z=s.ZP.ul(v||(v=(0,o.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  padding-top: 20px;\n"]))),P=s.ZP.li(m||(m=(0,o.Z)(["\n  max-width: 250px;\n  text-align: center;\n"]))),C=(0,s.ZP)(i.rU)(x||(x=(0,o.Z)(["\n  color: black;\n  font-size: 16px;\n  font-weight: 500;\n\n  &:hover,\n  &:focus {\n    color: tomato;\n  }\n"]))),_=s.ZP.div(k||(k=(0,o.Z)(["\n  position: relative;\n"]))),j=s.ZP.div(b||(b=(0,o.Z)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n\n  width: 50px;\n"]))),R=(0,s.ZP)(d)(w||(w=(0,o.Z)([""]))),L=function(t){var e=t.value,r=t.text;return(0,y.jsx)(R,{value:e,text:r,background:!0,backgroundPadding:6,styles:f({textColor:"black",pathColor:"teal",trailColor:"tomato",backgroundColor:"silver",textSize:"30px"})})},N=function(t){var e=t.movies,r=t.setIsLoading,o=(0,n.TH)(),i=(0,a.e4)(e.length,(function(){r(!1)}));return(0,y.jsx)(Z,{children:e.map((function(t,e){var r=t.title,n=t.id,a=t.poster,s=t.averageVote;return(0,y.jsx)(P,{children:(0,y.jsxs)(C,{to:"/movies/".concat(n),state:{from:o},children:[(0,y.jsxs)(_,{children:[(0,y.jsx)("img",{src:a,alt:r,width:"300px",onLoad:i,onError:i}),(0,y.jsx)(j,{children:(0,y.jsx)(L,{value:s,text:"".concat(s,"%")})})]}),(0,y.jsx)("h2",{children:r})]})},n)}))})}},3855:function(t,e,r){var n=r(5218),a=r(184);e.Z=function(){return(0,a.jsx)(n.x7,{position:"top-center",reverseOrder:!1})}},5415:function(t,e,r){r.r(e);var n=r(2791),a=r(7174),o=r(6481),i=r(3855),s=r(7178),c=r(184);e.default=function(){var t=(0,s.Z)(),e=t.movies,r=t.isLoading,u=t.setIsLoading,l=t.fetchMoviesList,h=(0,n.useRef)(l).current;return(0,n.useEffect)((function(){var t=new AbortController;return h({fetchParams:"trending/movie/week",controller:t}),function(){t.abort()}}),[h]),(0,c.jsxs)(c.Fragment,{children:[r&&(0,c.jsx)(o.Z,{}),!!e.length&&(0,c.jsx)(a.Z,{movies:e,isLoading:r,setIsLoading:u}),(0,c.jsx)(i.Z,{})]})}},7178:function(t,e,r){r.d(e,{Z:function(){return h}});var n=r(9439),a=r(2791),o=r(5861),i=r(4687),s=r.n(i),c=r(1243);c.Z.defaults.baseURL="https://api.themoviedb.org/3/";var u=function(){var t=(0,o.Z)(s().mark((function t(e){var r,n,a,o,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.fetchParams,n=e.query,a=void 0===n?null:n,o=e.controller,t.next=3,(0,c.Z)(r,{signal:o.signal,params:{api_key:"c095a52b18be81f1ee1fe016a8531acc",query:a}});case 3:return i=t.sent,t.abrupt("return",i.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=r(5218),h=function(){var t=(0,a.useState)([]),e=(0,n.Z)(t,2),r=e[0],o=e[1],i=(0,a.useState)(!1),s=(0,n.Z)(i,2),c=s[0],h=s[1],p=(0,a.useState)(null),d=(0,n.Z)(p,2),f=d[0],g=d[1],v=(0,a.useState)([]),m=(0,n.Z)(v,2),x=m[0],k=m[1],b=(0,a.useState)([]),w=(0,n.Z)(b,2),y=w[0],Z=w[1],P=(0,a.useState)(!1),C=(0,n.Z)(P,2),_=C[0],j=C[1];return{movies:r,fetchMoviesList:function(t){h(!0),u(t).then((function(t){t.results.length||(h(!1),l.ZP.error("Nothing found!"));var e=function(t){return t.map((function(t){var e=t.title,r=t.id,n=t.poster_path,a=t.vote_average;return{title:e,id:r,poster:n?"https://image.tmdb.org/t/p/w500/".concat(n):"https://placehold.co/500x750/png",averageVote:a&&Math.round(10*a)}}))}(t.results);o(e)})).catch((function(t){"canceled"!==t.message&&(h(!1),l.ZP.error(t.message))}))},movie:f,fetchMovie:function(t){h(!0),u(t).then((function(t){g(function(t){var e=t.release_date,r=t.title,n=t.poster_path,a=t.popularity,o=t.backdrop_path,i=t.id,s=t.tagline,c=t.genres,u=t.overview,l=e?e.split("-")[0]:"No release information",h=n?"https://image.tmdb.org/t/p/w500/".concat(n):"https://placehold.co/500x750/png",p=c.map((function(t){return t.name})).join(" ");return{date:l,title:r,tagline:s,id:i,poster:h,popularity:a+"",backdrop_path:o,genre:p.length?p:"No genre information",overview:u}}(t))})).catch((function(t){"canceled"!==t.message&&(h(!1),l.ZP.error(t.message))}))},cast:x,fetchCast:function(t){h(!0),u(t).then((function(t){k(function(t){return t.map((function(t){var e=t.id,r=t.name,n=t.original_name,a=t.character,o=t.profile_path;return{id:e,name:r,original_name:n,character:a,profile:o?"https://image.tmdb.org/t/p/w500/".concat(o):"https://placehold.co/80x100/png"}}))}(t.cast)),t.cast.length||(l.ZP.error("We don't have any cast for this movie"),h(!1))})).catch((function(t){"canceled"!==t.message&&l.ZP.error(t.message)}))},reviews:y,fetcReviews:function(t){j(!0),u(t).then((function(t){Z(function(t){return t.map((function(t){var e=t.author,r=t.author_details.avatar_path;return{author:e,content:t.content,id:t.id,avatar:!r||null!==r&&void 0!==r&&r.includes("https")?"https://placehold.co/80x80/png":"https://image.tmdb.org/t/p/w500/".concat(r)}}))}(t.results)),t.results.length||(l.ZP.error("We don't have any reviews for this movie"),j(!1))})).catch((function(t){"canceled"!==t.message&&l.ZP.error(t.message)}))},isLoading:c,setIsLoading:h,contentIsLoading:_,setContentIsLoading:j}}}}]);
//# sourceMappingURL=415.7033ed41.chunk.js.map