"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[627],{6481:function(t,e,n){var r=n(8175),o=n(184);e.Z=function(t){var e=t.column,n=void 0===e?4:e,a=t.height,i=void 0===a?450:a,s=t.width,c=n,u=i,l=void 0===s?300:s,d=u+5,p=l+5,h=Array(3*c).fill(1);return(0,o.jsx)(r.ZP,{speed:1,width:c*p,height:3*d,children:h.map((function(t,e){var n=Math.floor(e/c)*d+35,r=e*p%(c*p);return(0,o.jsx)("rect",{x:r,y:n,rx:"0",ry:"0",width:l,height:u},e)}))})}},7174:function(t,e,n){n.d(e,{Z:function(){return L}});var r=n(7689),o=n(5856),a=n(168),i=n(1087),s=n(6444),c=n(2791),u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},u(t,e)};function l(t){var e=t.className,n=t.counterClockwise,r=t.dashRatio,o=t.pathRadius,a=t.strokeWidth,i=t.style;return(0,c.createElement)("path",{className:e,style:Object.assign({},i,p({pathRadius:o,dashRatio:r,counterClockwise:n})),d:d({pathRadius:o,counterClockwise:n}),strokeWidth:a,fillOpacity:0})}function d(t){var e=t.pathRadius,n=t.counterClockwise?1:0;return"\n      M 50,50\n      m 0,-"+e+"\n      a "+e+","+e+" "+n+" 1 1 0,"+2*e+"\n      a "+e+","+e+" "+n+" 1 1 0,-"+2*e+"\n    "}function p(t){var e=t.counterClockwise,n=t.dashRatio,r=t.pathRadius,o=2*Math.PI*r,a=(1-n)*o;return{strokeDasharray:o+"px "+o+"px",strokeDashoffset:(e?-a:a)+"px"}}var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var t=this.props,e=t.value,n=t.minValue,r=t.maxValue;return(Math.min(Math.max(e,n),r)-n)/(r-n)},e.prototype.render=function(){var t=this.props,e=t.circleRatio,n=t.className,r=t.classes,o=t.counterClockwise,a=t.styles,i=t.strokeWidth,s=t.text,u=this.getPathRadius(),d=this.getPathRatio();return(0,c.createElement)("svg",{className:r.root+" "+n,style:a.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?(0,c.createElement)("circle",{className:r.background,style:a.background,cx:50,cy:50,r:50}):null,(0,c.createElement)(l,{className:r.trail,counterClockwise:o,dashRatio:e,pathRadius:u,strokeWidth:i,style:a.trail}),(0,c.createElement)(l,{className:r.path,counterClockwise:o,dashRatio:d*e,pathRadius:u,strokeWidth:i,style:a.path}),s?(0,c.createElement)("text",{className:r.text,style:a.text,x:50,y:50},s):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(c.Component);function f(t){var e=t.rotation,n=t.strokeLinecap,r=t.textColor,o=t.textSize,a=t.pathColor,i=t.pathTransition,s=t.pathTransitionDuration,c=t.trailColor,u=t.backgroundColor,l=null==e?void 0:"rotate("+e+"turn)",d=null==e?void 0:"center center";return{root:{},path:g({stroke:a,strokeLinecap:n,transform:l,transformOrigin:d,transition:i,transitionDuration:null==s?void 0:s+"s"}),trail:g({stroke:c,strokeLinecap:n,transform:l,transformOrigin:d}),text:g({fill:r,fontSize:o}),background:g({fill:u})}}function g(t){return Object.keys(t).forEach((function(e){null==t[e]&&delete t[e]})),t}var v,m,x,b,k,y,Z=n(184),w=s.ZP.ul(v||(v=(0,a.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  opacity: 0;\n  transition: opacity 1500ms;\n  &.loaded {\n    opacity: 1;\n  }\n"]))),P=s.ZP.li(m||(m=(0,a.Z)(["\n  max-width: 250px;\n  text-align: center;\n"]))),C=(0,s.ZP)(i.rU)(x||(x=(0,a.Z)(["\n  color: black;\n  font-size: 16px;\n  font-weight: 500;\n\n  &:hover,\n  &:focus {\n    color: tomato;\n  }\n"]))),_=s.ZP.div(b||(b=(0,a.Z)(["\n  position: relative;\n"]))),j=s.ZP.div(k||(k=(0,a.Z)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n\n  width: 50px;\n"]))),R=(0,s.ZP)(h)(y||(y=(0,a.Z)([""]))),Q=function(t){var e=t.value,n=t.text;return(0,Z.jsx)(R,{value:e,text:n,background:!0,backgroundPadding:6,styles:f({textColor:"black",pathColor:"teal",trailColor:"tomato",backgroundColor:"silver",textSize:"30px"})})},L=function(t){var e=t.movies,n=t.setContentIsLoading,a=t.contentIsLoading,i=(0,r.TH)(),s=(0,o.e4)(e.length,(function(){n(!1)}));return(0,Z.jsx)(w,{className:!a&&"loaded",children:e.map((function(t){var e=t.title,n=t.id,r=t.poster,o=t.averageVote;return(0,Z.jsx)(P,{children:(0,Z.jsxs)(C,{to:"/movies/".concat(n),state:{from:i},children:[(0,Z.jsxs)(_,{children:[(0,Z.jsx)("img",{src:r,alt:e,width:"300",height:"450",onLoad:s,onError:s}),(0,Z.jsx)(j,{children:(0,Z.jsx)(Q,{value:o,text:"".concat(o,"%")})})]}),(0,Z.jsx)("h2",{children:e})]})},n)}))})}},3855:function(t,e,n){var r=n(5218),o=n(184);e.Z=function(){return(0,o.jsx)(r.x7,{position:"top-center",reverseOrder:!1})}},8627:function(t,e,n){n.r(e),n.d(e,{default:function(){return Z}});var r,o,a,i=n(3433),s=n(9439),c=n(2791),u=n(1087),l=n(168),d=n(6444),p=d.ZP.form(r||(r=(0,l.Z)(["\n  width: 400px;\n  padding-top: 20px;\n  margin: 0 auto;\n  display: flex;\n  gap: 10px;\n"]))),h=d.ZP.input(o||(o=(0,l.Z)(["\n  width: 100%;\n  padding: 4px 8px;\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  background-color: silver;\n"]))),f=d.ZP.button(a||(a=(0,l.Z)(["\n  padding: 4px 8px;\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  background-color: silver;\n  cursor: pointer;\n  &:hover,\n  &:focus {\n    background-color: tomato;\n  }\n"]))),g=n(184),v=function(t){var e=t.setSearchParams,n=(0,c.useState)(""),r=(0,s.Z)(n,2),o=r[0],a=r[1];return(0,g.jsxs)(p,{onSubmit:function(t){t.preventDefault(),o.trim()&&(e({query:o.trim().toLowerCase()}),a(""))},children:[(0,g.jsx)(h,{type:"text",name:"query",value:o,placeholder:"Search movies",autoComplete:"off",autoFocus:!0,onChange:function(t){var e=t.currentTarget.value;a(e)}}),(0,g.jsx)(f,{type:"submit",children:"Search"})]})},m=n(7174),x=n(3855),b=n(6481),k=n(2117),y=n(9599),Z=function(){var t=(0,k.Z)(),e=t.movies,n=t.fetchMoviesList,r=t.contentIsLoading,o=t.setContentIsLoading,a=t.status,l=(0,c.useRef)(n).current,d=(0,u.lr)(),p=(0,s.Z)(d,2),h=p[0],f=p[1],Z=(0,c.useMemo)((function(){return Object.fromEntries((0,i.Z)(h))}),[h]).query;return(0,c.useEffect)((function(){if(Z){var t=new AbortController;return l({controller:t,fetchParams:"search/movie",query:Z}),function(){t.abort()}}}),[l,Z]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(v,{setSearchParams:f}),r&&(0,g.jsx)(b.Z,{}),a===y.Q_.resolved&&!!e.length&&(0,g.jsx)(m.Z,{movies:e,contentIsLoading:r,setContentIsLoading:o}),(0,g.jsx)(x.Z,{})]})}},4635:function(t,e,n){n.d(e,{v:function(){return s}});var r=n(5861),o=n(4687),a=n.n(o),i=n(1243);i.Z.defaults.baseURL="https://api.themoviedb.org/3/";var s=function(){var t=(0,r.Z)(a().mark((function t(e){var n,r,o,s,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.fetchParams,r=e.query,o=void 0===r?null:r,s=e.controller,t.next=3,(0,i.Z)(n,{signal:s.signal,params:{api_key:"c095a52b18be81f1ee1fe016a8531acc",query:o}});case 3:return c=t.sent,t.abrupt("return",c.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},6393:function(t,e,n){n.d(e,{Q:function(){return r}});var r={idle:"IDLE",pending:"PENDING",resolved:"RESOLVED",error:"ERROR"}},2117:function(t,e,n){n.d(e,{Z:function(){return c}});var r=n(9439),o=n(2791),a=n(4635),i=n(6393),s=n(5218),c=function(){var t=(0,o.useState)([]),e=(0,r.Z)(t,2),n=e[0],c=e[1],u=(0,o.useState)(null),l=(0,r.Z)(u,2),d=l[0],p=l[1],h=(0,o.useState)([]),f=(0,r.Z)(h,2),g=f[0],v=f[1],m=(0,o.useState)([]),x=(0,r.Z)(m,2),b=x[0],k=x[1],y=(0,o.useState)(!1),Z=(0,r.Z)(y,2),w=Z[0],P=Z[1],C=(0,o.useState)(i.Q.idle),_=(0,r.Z)(C,2),j=_[0],R=_[1];return{movies:n,fetchMoviesList:function(t){R(i.Q.pending),P(!0),(0,a.v)(t).then((function(t){if(0===t.results.length)return R(i.Q.resolved),P(!1),s.ZP.error("Nothing found!");var e=function(t){return t.map((function(t){var e=t.title,n=t.id,r=t.poster_path,o=t.vote_average;return{title:e,id:n,poster:r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",averageVote:o&&Math.round(10*o)}}))}(t.results);c(e),R(i.Q.resolved)})).catch((function(t){"canceled"!==t.message&&(R(i.Q.error),P(!1),s.ZP.error(t.message))}))},movie:d,fetchMovie:function(t){R(i.Q.pending),P(!0),(0,a.v)(t).then((function(t){p(function(t){var e=t.release_date,n=t.title,r=t.poster_path,o=t.popularity,a=t.backdrop_path,i=t.id,s=t.tagline,c=t.genres,u=t.overview,l=e?e.split("-")[0]:"No release information",d=r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",p=c.map((function(t){return t.name})).join(" ");return{date:l,title:n,tagline:s,id:i,poster:d,popularity:o+"",backdrop_path:a,genre:p.length?p:"No genre information",overview:u}}(t)),R(i.Q.resolved)})).catch((function(t){"canceled"!==t.message&&(R(i.Q.error),P(!1),s.ZP.error(t.message))}))},cast:g,fetchCast:function(t){R(i.Q.pending),P(!0),(0,a.v)(t).then((function(t){if(0===t.cast.length)return R(i.Q.resolved),P(!1),s.ZP.error("We don't have any cast for this movie");v(function(t){return t.map((function(t){var e=t.id,n=t.name,r=t.original_name,o=t.character,a=t.profile_path;return{id:e,name:n,original_name:r,character:o,profile:a?"https://image.tmdb.org/t/p/w500/".concat(a):"https://placehold.co/80x100/png"}}))}(t.cast)),R(i.Q.resolved)})).catch((function(t){"canceled"!==t.message&&(R(i.Q.error),P(!1),s.ZP.error(t.message))}))},reviews:b,fetcReviews:function(t){R(i.Q.pending),P(!0),(0,a.v)(t).then((function(t){if(0===t.results.length)return P(!1),R(i.Q.resolved),s.ZP.error("We don't have any reviews for this movie");k(function(t){return t.map((function(t){var e=t.author,n=t.author_details.avatar_path;return{author:e,content:t.content,id:t.id,avatar:!n||null!==n&&void 0!==n&&n.includes("https")?"https://placehold.co/80x80/png":"https://image.tmdb.org/t/p/w500/".concat(n)}}))}(t.results)),R(i.Q.resolved)})).catch((function(t){"canceled"!==t.message&&(P(!1),R(i.Q.error),s.ZP.error(t.message))}))},contentIsLoading:w,setContentIsLoading:P,status:j,setStatus:R}}},9599:function(t,e,n){n.d(e,{Q_:function(){return r.Q}});n(4635);var r=n(6393)}}]);
//# sourceMappingURL=627.7454bb2c.chunk.js.map