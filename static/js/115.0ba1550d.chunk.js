"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[115],{2115:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var r,a,o=n(7689),i=n(2791),c=n(3855),s=n(5856),u=n(6481),l=n(2117),d=n(9599),h=n(168),f=n(6444),p=f.ZP.ul(r||(r=(0,h.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  opacity: 0;\n  transition: opacity 1500ms;\n\n  &.loaded {\n    opacity: 1;\n  }\n"]))),v=f.ZP.li(a||(a=(0,h.Z)(["\n  max-width: 180px;\n"]))),g=n(5667),m=n(184),Z=function(){var e=(0,l.Z)(),t=e.cast,n=e.fetchCast,r=e.contentIsLoading,a=e.setContentIsLoading,h=e.status,f=(0,o.UO)().moviesId,Z=(0,i.useRef)(n).current;(0,i.useEffect)((function(){var e=new AbortController;return Z({fetchParams:"movie/".concat(f,"/credits"),controller:e}),g.NY.scrollMore(500),function(){e.abort()}}),[Z,f]);var w=(0,s.e4)(t.length,(function(){a(!1)}));return(0,m.jsxs)(m.Fragment,{children:[r&&(0,m.jsx)(u.Z,{column:6,height:270,width:180}),h===d.Q_.resolved&&!!t.length&&(0,m.jsx)(p,{className:!r&&"loaded",children:t.map((function(e){var t=e.id,n=e.name,r=e.original_name,a=e.character,o=e.profile;return(0,m.jsxs)(v,{children:[(0,m.jsx)("img",{src:o,alt:n,width:"180",height:"270",onLoad:w,onError:w}),(0,m.jsx)("p",{children:r}),(0,m.jsxs)("p",{children:["Character: ",a]})]},t)}))}),(0,m.jsx)(c.Z,{})]})}},6481:function(e,t,n){var r=n(8175),a=n(184);t.Z=function(e){var t=e.column,n=void 0===t?4:t,o=e.height,i=void 0===o?450:o,c=e.width,s=n,u=i,l=void 0===c?300:c,d=u+10,h=l+10,f=Array(3*s).fill(1);return(0,a.jsx)(r.ZP,{speed:1,width:s*h,height:3*d,children:f.map((function(e,t){var n=Math.floor(t/s)*d+35,r=t*h%(s*h);return(0,a.jsx)("rect",{x:r,y:n,rx:"0",ry:"0",width:l,height:u},t)}))})}},3855:function(e,t,n){var r=n(5218),a=n(184);t.Z=function(){return(0,a.jsx)(r.x7,{position:"top-center",reverseOrder:!1})}},4635:function(e,t,n){n.d(t,{v:function(){return c}});var r=n(5861),a=n(4687),o=n.n(a),i=n(1243);i.Z.defaults.baseURL="https://api.themoviedb.org/3/";var c=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,a,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetchParams,r=t.query,a=void 0===r?null:r,c=t.controller,e.next=3,(0,i.Z)(n,{signal:c.signal,params:{api_key:"c095a52b18be81f1ee1fe016a8531acc",query:a}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},6393:function(e,t,n){n.d(t,{Q:function(){return r}});var r={idle:"IDLE",pending:"PENDING",resolved:"RESOLVED",error:"ERROR"}},2117:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(9439),a=n(2791),o=n(4635),i=n(6393),c=n(5218),s=function(){var e=(0,a.useState)([]),t=(0,r.Z)(e,2),n=t[0],s=t[1],u=(0,a.useState)(null),l=(0,r.Z)(u,2),d=l[0],h=l[1],f=(0,a.useState)([]),p=(0,r.Z)(f,2),v=p[0],g=p[1],m=(0,a.useState)([]),Z=(0,r.Z)(m,2),w=Z[0],x=Z[1],_=(0,a.useState)(!1),Q=(0,r.Z)(_,2),b=Q[0],y=Q[1],j=(0,a.useState)(i.Q.idle),P=(0,r.Z)(j,2),L=P[0],k=P[1];return{movies:n,fetchMoviesList:function(e){k(i.Q.pending),y(!0),(0,o.v)(e).then((function(e){if(0===e.results.length)return k(i.Q.resolved),y(!1),c.ZP.error("Nothing found!");var t=function(e){return e.map((function(e){var t=e.title,n=e.id,r=e.poster_path,a=e.vote_average;return{title:t,id:n,poster:r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",averageVote:a&&Math.round(10*a)}}))}(e.results);s(t),k(i.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(k(i.Q.error),y(!1),c.ZP.error(e.message))}))},movie:d,fetchMovie:function(e){k(i.Q.pending),y(!0),(0,o.v)(e).then((function(e){h(function(e){var t=e.release_date,n=e.title,r=e.poster_path,a=e.popularity,o=e.backdrop_path,i=e.id,c=e.tagline,s=e.genres,u=e.overview,l=t?t.split("-")[0]:"No release information",d=r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",h=s.map((function(e){return e.name})).join(" ");return{date:l,title:n,tagline:c,id:i,poster:d,popularity:a+"",backdrop_path:o,genre:h.length?h:"No genre information",overview:u}}(e)),k(i.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(k(i.Q.error),y(!1),c.ZP.error(e.message))}))},cast:v,fetchCast:function(e){k(i.Q.pending),y(!0),(0,o.v)(e).then((function(e){if(0===e.cast.length)return k(i.Q.resolved),y(!1),c.ZP.error("We don't have any cast for this movie");g(function(e){return e.map((function(e){var t=e.id,n=e.name,r=e.original_name,a=e.character,o=e.profile_path;return{id:t,name:n,original_name:r,character:a,profile:o?"https://image.tmdb.org/t/p/w500/".concat(o):"https://placehold.co/80x100/png"}}))}(e.cast)),k(i.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(k(i.Q.error),y(!1),c.ZP.error(e.message))}))},reviews:w,fetcReviews:function(e){k(i.Q.pending),y(!0),(0,o.v)(e).then((function(e){if(0===e.results.length)return y(!1),k(i.Q.resolved),c.ZP.error("We don't have any reviews for this movie");x(function(e){return e.map((function(e){var t=e.author,n=e.author_details.avatar_path;return{author:t,content:e.content,id:e.id,avatar:!n||null!==n&&void 0!==n&&n.includes("https")?"https://placehold.co/80x80/png":"https://image.tmdb.org/t/p/w500/".concat(n)}}))}(e.results)),k(i.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(y(!1),k(i.Q.error),c.ZP.error(e.message))}))},contentIsLoading:b,setContentIsLoading:y,status:L,setStatus:k}}},9599:function(e,t,n){n.d(t,{Q_:function(){return r.Q}});n(4635);var r=n(6393)}}]);
//# sourceMappingURL=115.0ba1550d.chunk.js.map