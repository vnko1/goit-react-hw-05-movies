"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[627],{9021:function(e,n,t){t.d(n,{Z:function(){return f}});var r,o=t(7689),a=t(843),i=t(168),c=t(1087),u=(0,t(6444).ZP)(c.rU)(r||(r=(0,i.Z)(["\n  color: black;\n  font-size: 16px;\n  font-weight: 500;\n\n  &:hover,\n  &:focus {\n    color: tomato;\n  }\n"]))),s=t(184),f=function(e){var n=e.movies,t=(0,o.TH)();return(0,s.jsx)(a.Z,{style:{paddingTop:"10px"},children:n.map((function(e){var n=e.title,r=e.id;return(0,s.jsx)(a.Z.Item,{children:(0,s.jsx)(u,{to:"/movies/".concat(r),state:{from:t},children:n})},r)}))})}},3855:function(e,n,t){var r=t(5218),o=t(184);n.Z=function(){return(0,o.jsx)(r.x7,{position:"top-center",reverseOrder:!1})}},8627:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var r,o,a,i=t(3433),c=t(9439),u=t(2791),s=t(1087),f=t(168),l=t(6444),p=l.ZP.form(r||(r=(0,f.Z)(["\n  width: 400px;\n  padding-top: 20px;\n  margin: 0 auto;\n  display: flex;\n  gap: 10px;\n"]))),d=l.ZP.input(o||(o=(0,f.Z)(["\n  width: 100%;\n  padding: 4px 8px;\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  background-color: silver;\n"]))),h=l.ZP.button(a||(a=(0,f.Z)(["\n  padding: 4px 8px;\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  background-color: silver;\n  cursor: pointer;\n  &:hover,\n  &:focus {\n    background-color: tomato;\n  }\n"]))),m=t(184),v=function(e){var n=e.setSearchParams,t=(0,u.useState)(""),r=(0,c.Z)(t,2),o=r[0],a=r[1];return(0,m.jsxs)(p,{onSubmit:function(e){e.preventDefault(),o.trim()&&(n({query:o.trim().toLowerCase()}),a(""))},children:[(0,m.jsx)(d,{type:"text",name:"query",value:o,placeholder:"Search movies",autoComplete:"off",autoFocus:!0,onChange:function(e){var n=e.currentTarget.value;a(n)}}),(0,m.jsx)(h,{type:"submit",children:"Search"})]})},g=t(9021),Z=t(3855),x=t(334),b=t(7178),w=function(){var e=(0,b.Z)(),n=e.movies,t=e.fetchMoviesList,r=e.showLoader,o=(0,u.useRef)(t).current,a=(0,s.lr)(),f=(0,c.Z)(a,2),l=f[0],p=f[1],d=(0,u.useMemo)((function(){return Object.fromEntries((0,i.Z)(l))}),[l]).query;return(0,u.useEffect)((function(){if(d){var e=new AbortController;return o({controller:e,fetchParams:"search/movie",query:d}),function(){e.abort()}}}),[o,d]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(v,{setSearchParams:p}),r&&(0,m.jsx)(x.Z,{}),!!n.length&&(0,m.jsx)(g.Z,{movies:n}),(0,m.jsx)(Z.Z,{})]})}},7178:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(9439),o=t(2791),a=t(5861),i=t(4687),c=t.n(i),u=t(1243);u.Z.defaults.baseURL="https://api.themoviedb.org/3/";var s=function(){var e=(0,a.Z)(c().mark((function e(n){var t,r,o,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.fetchParams,r=n.query,o=void 0===r?null:r,a=n.controller,e.next=3,(0,u.Z)(t,{signal:a.signal,params:{api_key:"c095a52b18be81f1ee1fe016a8531acc",query:o}});case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),f=t(5218),l=function(){var e=(0,o.useState)([]),n=(0,r.Z)(e,2),t=n[0],a=n[1],i=(0,o.useState)(!1),c=(0,r.Z)(i,2),u=c[0],l=c[1],p=(0,o.useState)(null),d=(0,r.Z)(p,2),h=d[0],m=d[1],v=(0,o.useState)([]),g=(0,r.Z)(v,2),Z=g[0],x=g[1],b=(0,o.useState)([]),w=(0,r.Z)(b,2),_=w[0],y=w[1];return{movies:t,fetchMoviesList:function(e){l(!0),s(e).then((function(e){e.results.length||f.ZP.error("Nothing found!");var n=function(e){return e.map((function(e){return{title:e.title,id:e.id}}))}(e.results);a(n)})).catch((function(e){"canceled"!==e.message&&f.ZP.error(e.message)})).finally((function(){l(!1)}))},movie:h,fetchMovie:function(e){l(!0),s(e).then((function(e){m(function(e){var n=e.release_date,t=e.title,r=e.poster_path,o=e.popularity,a=e.backdrop_path,i=e.id,c=e.tagline,u=e.genres,s=e.overview,f=n?n.split("-")[0]:"No release information",l=r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",p=u.map((function(e){return e.name})).join(" ");return{date:f,title:t,tagline:c,id:i,poster:l,popularity:o+"",backdrop_path:a,genre:p.length?p:"No genre information",overview:s}}(e))})).catch((function(e){"canceled"!==e.message&&f.ZP.error(e.message)})).finally((function(){l(!1)}))},cast:Z,fetchCast:function(e){s(e).then((function(e){x(function(e){return e.map((function(e){return{id:e.id,name:e.name,original_name:e.original_name,character:e.character,profile_path:e.profile_path}}))}(e.cast))})).catch((function(e){"canceled"!==e.message&&f.ZP.error(e.message)}))},reviews:_,fetcReviews:function(e){s(e).then((function(e){y(function(e){return e.map((function(e){return{author:e.author,content:e.content,id:e.id}}))}(e.results))})).catch((function(e){"canceled"!==e.message&&f.ZP.error(e.message)}))},showLoader:u}}}}]);
//# sourceMappingURL=627.658578e1.chunk.js.map