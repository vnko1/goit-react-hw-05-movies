"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[379],{589:function(t,e,r){var n=r(689),a=r(87),i=r(184);e.Z=function(t){var e=t.movies,r=(0,n.TH)();return(0,i.jsx)("ul",{children:!!e.length&&e.map((function(t){var e=t.title,n=t.id;return(0,i.jsx)("li",{children:(0,i.jsx)(a.rU,{to:"/movies/".concat(n),state:{from:r},children:e})},n)}))})}},379:function(t,e,r){r.r(e),r.d(e,{default:function(){return l}});var n=r(433),a=r(439),i=r(791),u=r(87),o=r(184),c=function(t){var e=t.setSearchParams,r=(0,i.useState)(""),n=(0,a.Z)(r,2),u=n[0],c=n[1];return(0,o.jsxs)("form",{onSubmit:function(t){t.preventDefault(),u.trim()&&(e({query:u.trim().toLowerCase()}),c(""))},children:[(0,o.jsx)("input",{type:"text",name:"query",value:u,placeholder:"Search movies",autoComplete:"off",autoFocus:!0,onChange:function(t){var e=t.currentTarget.value;c(e)}}),(0,o.jsx)("button",{type:"submit",children:"Search"})]})},s=r(589),f=r(830),l=function(){var t=(0,i.useState)([]),e=(0,a.Z)(t,2),r=e[0],l=e[1],p=(0,u.lr)(),h=(0,a.Z)(p,2),m=h[0],v=h[1],d=(0,i.useMemo)((function(){return Object.fromEntries((0,n.Z)(m))}),[m]).query;return(0,i.useEffect)((function(){if(d){var t=new AbortController,e={controller:t,fetchParams:"search/movie",query:d};return(0,f.vw)(e).then((function(t){var e=(0,f.Lu)(t.results);l(e)})).catch((function(t){})).finally((function(){})),function(){t.abort()}}}),[d]),(0,o.jsxs)("div",{children:[(0,o.jsx)(c,{setSearchParams:v}),(0,o.jsx)(s.Z,{movies:r})]})}},830:function(t,e,r){r.d(e,{vw:function(){return o},in:function(){return f},Bf:function(){return s},Lu:function(){return c},tK:function(){return l}});var n=r(861),a=r(757),i=r.n(a),u=r(243);u.Z.defaults.baseURL="https://api.themoviedb.org/3/";var o=function(){var t=(0,n.Z)(i().mark((function t(e){var r,n,a,o,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.fetchParams,n=e.query,a=void 0===n?null:n,o=e.controller,t.next=3,(0,u.Z)(r,{signal:o.signal,params:{api_key:"c095a52b18be81f1ee1fe016a8531acc",query:a}});case 3:return c=t.sent,t.abrupt("return",c.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(t){return t.map((function(t){return{title:t.title,id:t.id}}))},s=function(t){var e=t.release_date,r=t.title,n=t.poster_path,a=t.popularity,i=t.backdrop_path,u=t.id,o=t.tagline,c=t.genres,s=t.overview,f=e.split("-"),l=c.map((function(t){return t.name})).join(" ");return{date:f[0],title:r,tagline:o,id:u,poster_path:n,popularity:a,backdrop_path:i,genreList:l,overview:s}},f=function(t){return t.map((function(t){return{id:t.id,name:t.name,original_name:t.original_name,character:t.character,profile_path:t.profile_path}}))},l=function(t){return t.map((function(t){return{author:t.author,content:t.content,id:t.id}}))}}}]);
//# sourceMappingURL=379.5a81917b.chunk.js.map