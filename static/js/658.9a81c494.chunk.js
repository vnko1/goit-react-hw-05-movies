"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[658],{9658:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n,i=r(7689),o=r(2791),a=r(5856),c=r(3855),s=r(1413),u=r(8175),h=r(184),d=function(e){return(0,h.jsxs)(u.ZP,(0,s.Z)((0,s.Z)({viewBox:"0 0 500 475",height:475,width:500},e),{},{children:[(0,h.jsx)("circle",{cx:"70.2",cy:"73.2",r:"41.3"}),(0,h.jsx)("rect",{x:"129.9",y:"29.5",width:"125.5",height:"17"}),(0,h.jsx)("rect",{x:"129.9",y:"64.7",width:"296",height:"17"}),(0,h.jsx)("rect",{x:"129.9",y:"97.8",width:"253.5",height:"17"}),(0,h.jsx)("rect",{x:"129.9",y:"132.3",width:"212.5",height:"17"}),(0,h.jsx)("circle",{cx:"70.7",cy:"243.5",r:"41.3"}),(0,h.jsx)("rect",{x:"130.4",y:"199.9",width:"125.5",height:"17"}),(0,h.jsx)("rect",{x:"130.4",y:"235",width:"296",height:"17"}),(0,h.jsx)("rect",{x:"130.4",y:"268.2",width:"253.5",height:"17"}),(0,h.jsx)("rect",{x:"130.4",y:"302.6",width:"212.5",height:"17"}),(0,h.jsx)("circle",{cx:"70.7",cy:"412.7",r:"41.3"}),(0,h.jsx)("rect",{x:"130.4",y:"369",width:"125.5",height:"17"}),(0,h.jsx)("rect",{x:"130.4",y:"404.2",width:"296",height:"17"}),(0,h.jsx)("rect",{x:"130.4",y:"437.3",width:"253.5",height:"17"}),(0,h.jsx)("rect",{x:"130.4",y:"471.8",width:"212.5",height:"17"})]}))},l=r(2117),f=r(9599),p=r(168),v=r(6444).ZP.ul(n||(n=(0,p.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  opacity: 0;\n  transition: opacity 1500ms;\n\n  &.listLoaded {\n    opacity: 1;\n  }\n"]))),g=r(5667),x=function(){var e=(0,l.Z)(),t=e.reviews,r=e.fetcReviews,n=e.contentIsLoading,s=e.setContentIsLoading,u=e.status,p=(0,i.UO)().moviesId,x=(0,o.useRef)(r).current;(0,o.useEffect)((function(){var e=new AbortController;return x({fetchParams:"movie/".concat(p,"/reviews"),controller:e}),g.NY.scrollMore(500),function(){e.abort()}}),[x,p]);var m=(0,a.e4)(t.length,(function(){s(!1)}));return(0,h.jsxs)(h.Fragment,{children:[n&&(0,h.jsx)(d,{}),u===f.Q_.resolved&&!!t.length&&(0,h.jsx)(v,{className:!n&&"listLoaded",children:t.map((function(e){var t=e.author,r=e.content,n=e.id,i=e.avatar;return(0,h.jsxs)("li",{children:[(0,h.jsx)("img",{src:i,alt:t,onLoad:m,onError:m,width:"80",height:"80"}),(0,h.jsxs)("h2",{children:["Author: ",t]}),(0,h.jsx)("p",{children:r})]},n)}))}),(0,h.jsx)(c.Z,{})]})}},3855:function(e,t,r){var n=r(5218),i=r(184);t.Z=function(){return(0,i.jsx)(n.x7,{position:"top-center",reverseOrder:!1})}},4635:function(e,t,r){r.d(t,{v:function(){return c}});var n=r(5861),i=r(4687),o=r.n(i),a=r(1243);a.Z.defaults.baseURL="https://api.themoviedb.org/3/";var c=function(){var e=(0,n.Z)(o().mark((function e(t){var r,n,i,c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fetchParams,n=t.query,i=void 0===n?null:n,c=t.controller,e.next=3,(0,a.Z)(r,{signal:c.signal,params:{api_key:"c095a52b18be81f1ee1fe016a8531acc",query:i}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},6393:function(e,t,r){r.d(t,{Q:function(){return n}});var n={idle:"IDLE",pending:"PENDING",resolved:"RESOLVED",error:"ERROR"}},2117:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(9439),i=r(2791),o=r(4635),a=r(6393),c=r(5218),s=function(){var e=(0,i.useState)([]),t=(0,n.Z)(e,2),r=t[0],s=t[1],u=(0,i.useState)(null),h=(0,n.Z)(u,2),d=h[0],l=h[1],f=(0,i.useState)([]),p=(0,n.Z)(f,2),v=p[0],g=p[1],x=(0,i.useState)([]),m=(0,n.Z)(x,2),w=m[0],y=m[1],j=(0,i.useState)(!1),Z=(0,n.Z)(j,2),_=Z[0],Q=Z[1],b=(0,i.useState)(a.Q.idle),P=(0,n.Z)(b,2),L=P[0],k=P[1];return{movies:r,fetchMoviesList:function(e){k(a.Q.pending),Q(!0),(0,o.v)(e).then((function(e){if(0===e.results.length)return k(a.Q.resolved),Q(!1),c.ZP.error("Nothing found!");var t=function(e){return e.map((function(e){var t=e.title,r=e.id,n=e.poster_path,i=e.vote_average;return{title:t,id:r,poster:n?"https://image.tmdb.org/t/p/w500/".concat(n):"https://placehold.co/500x750/png",averageVote:i&&Math.round(10*i)}}))}(e.results);s(t),k(a.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(k(a.Q.error),Q(!1),c.ZP.error(e.message))}))},movie:d,fetchMovie:function(e){k(a.Q.pending),Q(!0),(0,o.v)(e).then((function(e){l(function(e){var t=e.release_date,r=e.title,n=e.poster_path,i=e.popularity,o=e.backdrop_path,a=e.id,c=e.tagline,s=e.genres,u=e.overview,h=t?t.split("-")[0]:"No release information",d=n?"https://image.tmdb.org/t/p/w500/".concat(n):"https://placehold.co/500x750/png",l=s.map((function(e){return e.name})).join(" ");return{date:h,title:r,tagline:c,id:a,poster:d,popularity:i+"",backdrop_path:o,genre:l.length?l:"No genre information",overview:u}}(e)),k(a.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(k(a.Q.error),Q(!1),c.ZP.error(e.message))}))},cast:v,fetchCast:function(e){k(a.Q.pending),Q(!0),(0,o.v)(e).then((function(e){if(0===e.cast.length)return k(a.Q.resolved),Q(!1),c.ZP.error("We don't have any cast for this movie");g(function(e){return e.map((function(e){var t=e.id,r=e.name,n=e.original_name,i=e.character,o=e.profile_path;return{id:t,name:r,original_name:n,character:i,profile:o?"https://image.tmdb.org/t/p/w500/".concat(o):"https://placehold.co/80x100/png"}}))}(e.cast)),k(a.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(k(a.Q.error),Q(!1),c.ZP.error(e.message))}))},reviews:w,fetcReviews:function(e){k(a.Q.pending),Q(!0),(0,o.v)(e).then((function(e){if(0===e.results.length)return Q(!1),k(a.Q.resolved),c.ZP.error("We don't have any reviews for this movie");y(function(e){return e.map((function(e){var t=e.author,r=e.author_details.avatar_path;return{author:t,content:e.content,id:e.id,avatar:!r||null!==r&&void 0!==r&&r.includes("https")?"https://placehold.co/80x80/png":"https://image.tmdb.org/t/p/w500/".concat(r)}}))}(e.results)),k(a.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(Q(!1),k(a.Q.error),c.ZP.error(e.message))}))},contentIsLoading:_,setContentIsLoading:Q,status:L,setStatus:k}}},9599:function(e,t,r){r.d(t,{Q_:function(){return n.Q}});r(4635);var n=r(6393)}}]);
//# sourceMappingURL=658.9a81c494.chunk.js.map