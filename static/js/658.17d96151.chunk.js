"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[658],{9658:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var r,i=n(7689),a=n(2791),o=n(5856),c=n(3855),s=n(1413),u=n(8175),h=n(184),d=function(e){return(0,h.jsxs)(u.ZP,(0,s.Z)((0,s.Z)({viewBox:"0 0 500 475",height:475,width:500},e),{},{children:[(0,h.jsx)("circle",{cx:"70.2",cy:"73.2",r:"41.3"}),(0,h.jsx)("rect",{x:"129.9",y:"29.5",width:"125.5",height:"17"}),(0,h.jsx)("rect",{x:"129.9",y:"64.7",width:"296",height:"17"}),(0,h.jsx)("rect",{x:"129.9",y:"97.8",width:"253.5",height:"17"}),(0,h.jsx)("rect",{x:"129.9",y:"132.3",width:"212.5",height:"17"}),(0,h.jsx)("circle",{cx:"70.7",cy:"243.5",r:"41.3"}),(0,h.jsx)("rect",{x:"130.4",y:"199.9",width:"125.5",height:"17"}),(0,h.jsx)("rect",{x:"130.4",y:"235",width:"296",height:"17"}),(0,h.jsx)("rect",{x:"130.4",y:"268.2",width:"253.5",height:"17"}),(0,h.jsx)("rect",{x:"130.4",y:"302.6",width:"212.5",height:"17"}),(0,h.jsx)("circle",{cx:"70.7",cy:"412.7",r:"41.3"}),(0,h.jsx)("rect",{x:"130.4",y:"369",width:"125.5",height:"17"}),(0,h.jsx)("rect",{x:"130.4",y:"404.2",width:"296",height:"17"}),(0,h.jsx)("rect",{x:"130.4",y:"437.3",width:"253.5",height:"17"}),(0,h.jsx)("rect",{x:"130.4",y:"471.8",width:"212.5",height:"17"})]}))},l=n(2117),f=n(9599),p=n(168),v=n(6444).ZP.ul(r||(r=(0,p.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  opacity: 0;\n  transition: opacity 1500ms;\n\n  &.listLoaded {\n    opacity: 1;\n  }\n"]))),g=function(){var e=(0,l.Z)(),t=e.reviews,n=e.fetcReviews,r=e.contentIsLoading,s=e.setContentIsLoading,u=e.status,p=(0,i.UO)().moviesId,g=(0,a.useRef)(n).current;(0,a.useEffect)((function(){var e=new AbortController;return g({fetchParams:"movie/".concat(p,"/reviews"),controller:e}),function(){e.abort()}}),[g,p]);var x=(0,o.e4)(t.length,(function(){s(!1)}));return(0,h.jsxs)(h.Fragment,{children:[r&&(0,h.jsx)(d,{}),u===f.Q_.resolved&&!!t.length&&(0,h.jsx)(v,{className:!r&&"listLoaded",children:t.map((function(e){var t=e.author,n=e.content,r=e.id,i=e.avatar;return(0,h.jsxs)("li",{children:[(0,h.jsx)("img",{src:i,alt:t,onLoad:x,onError:x,width:"80",height:"80"}),(0,h.jsxs)("h2",{children:["Author: ",t]}),(0,h.jsx)("p",{children:n})]},r)}))}),(0,h.jsx)(c.Z,{})]})}},3855:function(e,t,n){var r=n(5218),i=n(184);t.Z=function(){return(0,i.jsx)(r.x7,{position:"top-center",reverseOrder:!1})}},4635:function(e,t,n){n.d(t,{v:function(){return c}});var r=n(5861),i=n(4687),a=n.n(i),o=n(1243);o.Z.defaults.baseURL="https://api.themoviedb.org/3/";var c=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r,i,c,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetchParams,r=t.query,i=void 0===r?null:r,c=t.controller,e.next=3,(0,o.Z)(n,{signal:c.signal,params:{api_key:"c095a52b18be81f1ee1fe016a8531acc",query:i}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},6393:function(e,t,n){n.d(t,{Q:function(){return r}});var r={idle:"IDLE",pending:"PENDING",resolved:"RESOLVED",error:"ERROR"}},2117:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(9439),i=n(2791),a=n(4635),o=n(6393),c=n(5218),s=function(){var e=(0,i.useState)([]),t=(0,r.Z)(e,2),n=t[0],s=t[1],u=(0,i.useState)(null),h=(0,r.Z)(u,2),d=h[0],l=h[1],f=(0,i.useState)([]),p=(0,r.Z)(f,2),v=p[0],g=p[1],x=(0,i.useState)([]),m=(0,r.Z)(x,2),w=m[0],y=m[1],j=(0,i.useState)(!1),Z=(0,r.Z)(j,2),_=Z[0],Q=Z[1],b=(0,i.useState)(o.Q.idle),P=(0,r.Z)(b,2),L=P[0],k=P[1];return{movies:n,fetchMoviesList:function(e){k(o.Q.pending),Q(!0),(0,a.v)(e).then((function(e){if(0===e.results.length)return k(o.Q.resolved),Q(!1),c.ZP.error("Nothing found!");var t=function(e){return e.map((function(e){var t=e.title,n=e.id,r=e.poster_path,i=e.vote_average;return{title:t,id:n,poster:r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",averageVote:i&&Math.round(10*i)}}))}(e.results);s(t),k(o.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(k(o.Q.error),Q(!1),c.ZP.error(e.message))}))},movie:d,fetchMovie:function(e){k(o.Q.pending),Q(!0),(0,a.v)(e).then((function(e){l(function(e){var t=e.release_date,n=e.title,r=e.poster_path,i=e.popularity,a=e.backdrop_path,o=e.id,c=e.tagline,s=e.genres,u=e.overview,h=t?t.split("-")[0]:"No release information",d=r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",l=s.map((function(e){return e.name})).join(" ");return{date:h,title:n,tagline:c,id:o,poster:d,popularity:i+"",backdrop_path:a,genre:l.length?l:"No genre information",overview:u}}(e)),k(o.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(k(o.Q.error),Q(!1),c.ZP.error(e.message))}))},cast:v,fetchCast:function(e){k(o.Q.pending),Q(!0),(0,a.v)(e).then((function(e){if(0===e.cast.length)return k(o.Q.resolved),Q(!1),c.ZP.error("We don't have any cast for this movie");g(function(e){return e.map((function(e){var t=e.id,n=e.name,r=e.original_name,i=e.character,a=e.profile_path;return{id:t,name:n,original_name:r,character:i,profile:a?"https://image.tmdb.org/t/p/w500/".concat(a):"https://placehold.co/80x100/png"}}))}(e.cast)),k(o.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(k(o.Q.error),Q(!1),c.ZP.error(e.message))}))},reviews:w,fetcReviews:function(e){k(o.Q.pending),Q(!0),(0,a.v)(e).then((function(e){if(0===e.results.length)return Q(!1),k(o.Q.resolved),c.ZP.error("We don't have any reviews for this movie");y(function(e){return e.map((function(e){var t=e.author,n=e.author_details.avatar_path;return{author:t,content:e.content,id:e.id,avatar:!n||null!==n&&void 0!==n&&n.includes("https")?"https://placehold.co/80x80/png":"https://image.tmdb.org/t/p/w500/".concat(n)}}))}(e.results)),k(o.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(Q(!1),k(o.Q.error),c.ZP.error(e.message))}))},contentIsLoading:_,setContentIsLoading:Q,status:L,setStatus:k}}},9599:function(e,t,n){n.d(t,{Q_:function(){return r.Q}});n(4635);var r=n(6393)}}]);
//# sourceMappingURL=658.17d96151.chunk.js.map