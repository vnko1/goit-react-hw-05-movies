"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[627],{7174:function(t,e,r){r.d(e,{Z:function(){return S}});var n=r(7689),o=r(168),a=r(1087),i=r(6444),s=r(2791),c=function(t,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},c(t,e)};function u(t){var e=t.className,r=t.counterClockwise,n=t.dashRatio,o=t.pathRadius,a=t.strokeWidth,i=t.style;return(0,s.createElement)("path",{className:e,style:Object.assign({},i,p({pathRadius:o,dashRatio:n,counterClockwise:r})),d:l({pathRadius:o,counterClockwise:r}),strokeWidth:a,fillOpacity:0})}function l(t){var e=t.pathRadius,r=t.counterClockwise?1:0;return"\n      M 50,50\n      m 0,-"+e+"\n      a "+e+","+e+" "+r+" 1 1 0,"+2*e+"\n      a "+e+","+e+" "+r+" 1 1 0,-"+2*e+"\n    "}function p(t){var e=t.counterClockwise,r=t.dashRatio,n=t.pathRadius,o=2*Math.PI*n,a=(1-r)*o;return{strokeDasharray:o+"px "+o+"px",strokeDashoffset:(e?-a:a)+"px"}}var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var t=this.props,e=t.value,r=t.minValue,n=t.maxValue;return(Math.min(Math.max(e,r),n)-r)/(n-r)},e.prototype.render=function(){var t=this.props,e=t.circleRatio,r=t.className,n=t.classes,o=t.counterClockwise,a=t.styles,i=t.strokeWidth,c=t.text,l=this.getPathRadius(),p=this.getPathRatio();return(0,s.createElement)("svg",{className:n.root+" "+r,style:a.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?(0,s.createElement)("circle",{className:n.background,style:a.background,cx:50,cy:50,r:50}):null,(0,s.createElement)(u,{className:n.trail,counterClockwise:o,dashRatio:e,pathRadius:l,strokeWidth:i,style:a.trail}),(0,s.createElement)(u,{className:n.path,counterClockwise:o,dashRatio:p*e,pathRadius:l,strokeWidth:i,style:a.path}),c?(0,s.createElement)("text",{className:n.text,style:a.text,x:50,y:50},c):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(s.Component);function h(t){var e=t.rotation,r=t.strokeLinecap,n=t.textColor,o=t.textSize,a=t.pathColor,i=t.pathTransition,s=t.pathTransitionDuration,c=t.trailColor,u=t.backgroundColor,l=null==e?void 0:"rotate("+e+"turn)",p=null==e?void 0:"center center";return{root:{},path:f({stroke:a,strokeLinecap:r,transform:l,transformOrigin:p,transition:i,transitionDuration:null==s?void 0:s+"s"}),trail:f({stroke:c,strokeLinecap:r,transform:l,transformOrigin:p}),text:f({fill:n,fontSize:o}),background:f({fill:u})}}function f(t){return Object.keys(t).forEach((function(e){null==t[e]&&delete t[e]})),t}var g,m,v,x,b,k,y=r(184),Z=i.ZP.ul(g||(g=(0,o.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  padding-top: 20px;\n"]))),P=i.ZP.li(m||(m=(0,o.Z)(["\n  max-width: 250px;\n  text-align: center;\n"]))),w=(0,i.ZP)(a.rU)(v||(v=(0,o.Z)(["\n  color: black;\n  font-size: 16px;\n  font-weight: 500;\n\n  &:hover,\n  &:focus {\n    color: tomato;\n  }\n"]))),C=i.ZP.div(x||(x=(0,o.Z)(["\n  position: relative;\n"]))),_=i.ZP.div(b||(b=(0,o.Z)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n\n  width: 50px;\n"]))),j=(0,i.ZP)(d)(k||(k=(0,o.Z)([""]))),R=function(t){var e=t.value,r=t.text;return(0,y.jsx)(j,{value:e,text:r,background:!0,backgroundPadding:6,styles:h({textColor:"black",pathColor:"teal",trailColor:"tomato",backgroundColor:"silver",textSize:"30px"})})},S=function(t){var e=t.movies,r=(0,n.TH)();return(0,y.jsx)(Z,{children:e.map((function(t){var e=t.title,n=t.id,o=t.poster,a=t.averageVote;return(0,y.jsx)(P,{children:(0,y.jsxs)(w,{to:"/movies/".concat(n),state:{from:r},children:[(0,y.jsxs)(C,{children:[(0,y.jsx)("img",{src:o,alt:e,width:"300px"}),(0,y.jsx)(_,{children:(0,y.jsx)(R,{value:a,text:"".concat(a,"%")})})]}),(0,y.jsx)("h2",{children:e})]})},n)}))})}},3855:function(t,e,r){var n=r(5218),o=r(184);e.Z=function(){return(0,o.jsx)(n.x7,{position:"top-center",reverseOrder:!1})}},8627:function(t,e,r){r.r(e),r.d(e,{default:function(){return y}});var n,o,a,i=r(3433),s=r(9439),c=r(2791),u=r(1087),l=r(168),p=r(6444),d=p.ZP.form(n||(n=(0,l.Z)(["\n  width: 400px;\n  padding-top: 20px;\n  margin: 0 auto;\n  display: flex;\n  gap: 10px;\n"]))),h=p.ZP.input(o||(o=(0,l.Z)(["\n  width: 100%;\n  padding: 4px 8px;\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  background-color: silver;\n"]))),f=p.ZP.button(a||(a=(0,l.Z)(["\n  padding: 4px 8px;\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  background-color: silver;\n  cursor: pointer;\n  &:hover,\n  &:focus {\n    background-color: tomato;\n  }\n"]))),g=r(184),m=function(t){var e=t.setSearchParams,r=(0,c.useState)(""),n=(0,s.Z)(r,2),o=n[0],a=n[1];return(0,g.jsxs)(d,{onSubmit:function(t){t.preventDefault(),o.trim()&&(e({query:o.trim().toLowerCase()}),a(""))},children:[(0,g.jsx)(h,{type:"text",name:"query",value:o,placeholder:"Search movies",autoComplete:"off",autoFocus:!0,onChange:function(t){var e=t.currentTarget.value;a(e)}}),(0,g.jsx)(f,{type:"submit",children:"Search"})]})},v=r(7174),x=r(3855),b=r(334),k=r(7178),y=function(){var t=(0,k.Z)(),e=t.movies,r=t.fetchMoviesList,n=t.showLoader,o=(0,c.useRef)(r).current,a=(0,u.lr)(),l=(0,s.Z)(a,2),p=l[0],d=l[1],h=(0,c.useMemo)((function(){return Object.fromEntries((0,i.Z)(p))}),[p]).query;return(0,c.useEffect)((function(){if(h){var t=new AbortController;return o({controller:t,fetchParams:"search/movie",query:h}),function(){t.abort()}}}),[o,h]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m,{setSearchParams:d}),n&&(0,g.jsx)(b.Z,{}),!!e.length&&(0,g.jsx)(v.Z,{movies:e}),(0,g.jsx)(x.Z,{})]})}},7178:function(t,e,r){r.d(e,{Z:function(){return p}});var n=r(9439),o=r(2791),a=r(5861),i=r(4687),s=r.n(i),c=r(1243);c.Z.defaults.baseURL="https://api.themoviedb.org/3/";var u=function(){var t=(0,a.Z)(s().mark((function t(e){var r,n,o,a,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.fetchParams,n=e.query,o=void 0===n?null:n,a=e.controller,t.next=3,(0,c.Z)(r,{signal:a.signal,params:{api_key:"c095a52b18be81f1ee1fe016a8531acc",query:o}});case 3:return i=t.sent,t.abrupt("return",i.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=r(5218),p=function(){var t=(0,o.useState)([]),e=(0,n.Z)(t,2),r=e[0],a=e[1],i=(0,o.useState)(!1),s=(0,n.Z)(i,2),c=s[0],p=s[1],d=(0,o.useState)(null),h=(0,n.Z)(d,2),f=h[0],g=h[1],m=(0,o.useState)([]),v=(0,n.Z)(m,2),x=v[0],b=v[1],k=(0,o.useState)([]),y=(0,n.Z)(k,2),Z=y[0],P=y[1];return{movies:r,fetchMoviesList:function(t){p(!0),u(t).then((function(t){t.results.length||l.ZP.error("Nothing found!");var e=function(t){return t.map((function(t){var e=t.title,r=t.id,n=t.poster_path,o=t.vote_average;return{title:e,id:r,poster:n?"https://image.tmdb.org/t/p/w500/".concat(n):"https://placehold.co/500x750/png",averageVote:o&&Math.round(10*o)}}))}(t.results);a(e)})).catch((function(t){"canceled"!==t.message&&l.ZP.error(t.message)})).finally((function(){p(!1)}))},movie:f,fetchMovie:function(t){p(!0),u(t).then((function(t){g(function(t){var e=t.release_date,r=t.title,n=t.poster_path,o=t.popularity,a=t.backdrop_path,i=t.id,s=t.tagline,c=t.genres,u=t.overview,l=e?e.split("-")[0]:"No release information",p=n?"https://image.tmdb.org/t/p/w500/".concat(n):"https://placehold.co/500x750/png",d=c.map((function(t){return t.name})).join(" ");return{date:l,title:r,tagline:s,id:i,poster:p,popularity:o+"",backdrop_path:a,genre:d.length?d:"No genre information",overview:u}}(t))})).catch((function(t){"canceled"!==t.message&&l.ZP.error(t.message)})).finally((function(){p(!1)}))},cast:x,fetchCast:function(t){u(t).then((function(t){b(function(t){return t.map((function(t){return{id:t.id,name:t.name,original_name:t.original_name,character:t.character,profile_path:t.profile_path}}))}(t.cast)),t.cast.length||l.ZP.error("We don't have any cast for this movie")})).catch((function(t){"canceled"!==t.message&&l.ZP.error(t.message)}))},reviews:Z,fetcReviews:function(t){u(t).then((function(t){P(function(t){return t.map((function(t){return{author:t.author,content:t.content,id:t.id}}))}(t.results)),t.results.length||l.ZP.error("We don't have any reviews for this movie")})).catch((function(t){"canceled"!==t.message&&l.ZP.error(t.message)}))},showLoader:c}}}}]);
//# sourceMappingURL=627.e8741417.chunk.js.map