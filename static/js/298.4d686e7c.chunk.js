"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[298],{3855:function(e,n,t){var r=t(5218),o=t(184);n.Z=function(){return(0,o.jsx)(r.x7,{position:"top-center",reverseOrder:!1})}},3298:function(e,n,t){t.r(n),t.d(n,{default:function(){return _}});var r,o,i,a,s=t(2791),c=t(7689),u=t(168),d=t(6444),l=t(1087),p=d.ZP.div(r||(r=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 12px;\n  padding-top: 10px;\n  opacity: 0;\n  transition: opacity 1500ms;\n\n  &.loaded {\n    opacity: 1;\n  }\n"]))),h=d.ZP.div(o||(o=(0,u.Z)(["\n  display: flex;\n  gap: 10px;\n"]))),v=d.ZP.ul(i||(i=(0,u.Z)(["\n  display: flex;\n  gap: 20px;\n"]))),f=(0,d.ZP)(l.rU)(a||(a=(0,u.Z)(["\n  width: 100px;\n  margin: 0;\n  text-align: center;\n  color: black;\n  padding: 4px 8px;\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  cursor: pointer;\n\n  &:hover,\n  &:focus {\n    color: tomato;\n  }\n"]))),g=t(184),m=function(e){var n,t,r=e.movie,o=e.setContentIsLoading,i=e.contentIsLoading,a=r.date,u=r.title,d=r.tagline,l=r.poster,m=r.popularity,x=r.genre,j=r.overview,Z=(0,c.TH)(),w=(0,s.useRef)(null!==(n=null===(t=Z.state)||void 0===t?void 0:t.from)&&void 0!==n?n:"/"),_=function(){return o(!1)};return(0,g.jsxs)(p,{className:!i&&"loaded",children:[(0,g.jsx)(f,{to:w.current,children:"Go back"}),(0,g.jsxs)(h,{children:[(0,g.jsx)("img",{src:l,alt:d,onLoad:_,onError:_,width:"400",height:"600"}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{children:u}),(0,g.jsx)("p",{children:"".concat(a)})]}),(0,g.jsxs)("p",{children:["Popularity: ",m]}),(0,g.jsx)("h2",{children:"Overview"}),(0,g.jsx)("p",{children:j}),(0,g.jsx)("h2",{children:"Genres"}),(0,g.jsx)("p",{children:x})]})]}),(0,g.jsx)("h2",{children:"Additional information"}),(0,g.jsxs)(v,{children:[(0,g.jsx)("li",{children:(0,g.jsx)(f,{to:"cast",children:"Cast"})}),(0,g.jsx)("li",{children:(0,g.jsx)(f,{to:"reviews",children:"Reviews"})})]}),(0,g.jsx)(s.Suspense,{children:(0,g.jsx)(c.j3,{})})]})},x=t(3855),j=t(7420),Z=t(2117),w=t(9599),_=function(){var e=(0,Z.Z)(),n=e.movie,t=e.fetchMovie,r=e.status,o=e.contentIsLoading,i=e.setContentIsLoading,a=(0,s.useRef)(t).current,u=(0,c.UO)().moviesId;return(0,s.useEffect)((function(){var e=new AbortController;return a({fetchParams:"movie/".concat(u),controller:e}),function(){e.abort()}}),[a,u]),(0,g.jsxs)(g.Fragment,{children:[o&&(0,g.jsx)(j.Z,{}),r===w.Q_.resolved&&(0,g.jsx)(m,{movie:n,setContentIsLoading:i,contentIsLoading:o}),(0,g.jsx)(x.Z,{})]})}},4635:function(e,n,t){t.d(n,{v:function(){return s}});var r=t(5861),o=t(4687),i=t.n(o),a=t(1243);a.Z.defaults.baseURL="https://api.themoviedb.org/3/";var s=function(){var e=(0,r.Z)(i().mark((function e(n){var t,r,o,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.fetchParams,r=n.query,o=void 0===r?null:r,s=n.controller,e.next=3,(0,a.Z)(t,{signal:s.signal,params:{api_key:"c095a52b18be81f1ee1fe016a8531acc",query:o}});case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},6393:function(e,n,t){t.d(n,{Q:function(){return r}});var r={idle:"IDLE",pending:"PENDING",resolved:"RESOLVED",error:"ERROR"}},2117:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(9439),o=t(2791),i=t(4635),a=t(6393),s=t(5218),c=function(){var e=(0,o.useState)([]),n=(0,r.Z)(e,2),t=n[0],c=n[1],u=(0,o.useState)(null),d=(0,r.Z)(u,2),l=d[0],p=d[1],h=(0,o.useState)([]),v=(0,r.Z)(h,2),f=v[0],g=v[1],m=(0,o.useState)([]),x=(0,r.Z)(m,2),j=x[0],Z=x[1],w=(0,o.useState)(!1),_=(0,r.Z)(w,2),Q=_[0],b=_[1],y=(0,o.useState)(a.Q.idle),P=(0,r.Z)(y,2),L=P[0],I=P[1];return{movies:t,fetchMoviesList:function(e){I(a.Q.pending),b(!0),(0,i.v)(e).then((function(e){if(0===e.results.length)return I(a.Q.resolved),b(!1),s.ZP.error("Nothing found!");var n=function(e){return e.map((function(e){var n=e.title,t=e.id,r=e.poster_path,o=e.vote_average;return{title:n,id:t,poster:r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",averageVote:o&&Math.round(10*o)}}))}(e.results);c(n),I(a.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(I(a.Q.error),b(!1),s.ZP.error(e.message))}))},movie:l,fetchMovie:function(e){I(a.Q.pending),b(!0),(0,i.v)(e).then((function(e){p(function(e){var n=e.release_date,t=e.title,r=e.poster_path,o=e.popularity,i=e.backdrop_path,a=e.id,s=e.tagline,c=e.genres,u=e.overview,d=n?n.split("-")[0]:"No release information",l=r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",p=c.map((function(e){return e.name})).join(" ");return{date:d,title:t,tagline:s,id:a,poster:l,popularity:o+"",backdrop_path:i,genre:p.length?p:"No genre information",overview:u}}(e)),I(a.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(I(a.Q.error),b(!1),s.ZP.error(e.message))}))},cast:f,fetchCast:function(e){I(a.Q.pending),b(!0),(0,i.v)(e).then((function(e){if(0===e.cast.length)return I(a.Q.resolved),b(!1),s.ZP.error("We don't have any cast for this movie");g(function(e){return e.map((function(e){var n=e.id,t=e.name,r=e.original_name,o=e.character,i=e.profile_path;return{id:n,name:t,original_name:r,character:o,profile:i?"https://image.tmdb.org/t/p/w500/".concat(i):"https://placehold.co/80x100/png"}}))}(e.cast)),I(a.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(I(a.Q.error),b(!1),s.ZP.error(e.message))}))},reviews:j,fetcReviews:function(e){I(a.Q.pending),b(!0),(0,i.v)(e).then((function(e){if(0===e.results.length)return b(!1),I(a.Q.resolved),s.ZP.error("We don't have any reviews for this movie");Z(function(e){return e.map((function(e){var n=e.author,t=e.author_details.avatar_path;return{author:n,content:e.content,id:e.id,avatar:!t||null!==t&&void 0!==t&&t.includes("https")?"https://placehold.co/80x80/png":"https://image.tmdb.org/t/p/w500/".concat(t)}}))}(e.results)),I(a.Q.resolved)})).catch((function(e){"canceled"!==e.message&&(b(!1),I(a.Q.error),s.ZP.error(e.message))}))},contentIsLoading:Q,setContentIsLoading:b,status:L,setStatus:I}}},9599:function(e,n,t){t.d(n,{Q_:function(){return r.Q}});t(4635);var r=t(6393)}}]);
//# sourceMappingURL=298.4d686e7c.chunk.js.map