"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[582],{6481:function(e,n,t){var r=t(1413),o=t(8175),a=t(184);n.Z=function(e){var n=Array(12).fill(1);return(0,a.jsx)(o.ZP,(0,r.Z)((0,r.Z)({speed:1,width:1220,height:1365},e),{},{children:n.map((function(e,n){var t=455*Math.floor(n/4)+35,r=305*n%1220;return(0,a.jsx)("rect",{x:r,y:t,rx:"0",ry:"0",width:300,height:450},n)}))}))}},9021:function(e,n,t){t.d(n,{Z:function(){return y}});var r,o,a,i,s,c,u=t(7689),l=t(5856),p=t(168),f=t(1087),d=t(6444),h=t(9391),v=(t(1009),t(184)),g=d.ZP.ul(r||(r=(0,p.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  padding-top: 20px;\n"]))),m=d.ZP.li(o||(o=(0,p.Z)(["\n  max-width: 250px;\n  text-align: center;\n"]))),x=(0,d.ZP)(f.rU)(a||(a=(0,p.Z)(["\n  color: black;\n  font-size: 16px;\n  font-weight: 500;\n\n  &:hover,\n  &:focus {\n    color: tomato;\n  }\n"]))),Z=d.ZP.div(i||(i=(0,p.Z)(["\n  position: relative;\n"]))),b=d.ZP.div(s||(s=(0,p.Z)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n\n  width: 50px;\n"]))),w=(0,d.ZP)(h.Ip)(c||(c=(0,p.Z)([""]))),j=function(e){var n=e.value,t=e.text;return(0,v.jsx)(w,{value:n,text:t,background:!0,backgroundPadding:6,styles:(0,h.y3)({textColor:"black",pathColor:"teal",trailColor:"tomato",backgroundColor:"silver",textSize:"30px"})})},y=function(e){var n=e.movies,t=e.setIsLoading,r=(0,u.TH)(),o=(0,l.e4)(n.length,(function(){t(!1)}));return(0,v.jsx)(g,{children:n.map((function(e,n){var t=e.title,a=e.id,i=e.poster,s=e.averageVote;return(0,v.jsx)(m,{children:(0,v.jsxs)(x,{to:"/movies/".concat(a),state:{from:r},children:[(0,v.jsxs)(Z,{children:[(0,v.jsx)("img",{src:i,alt:t,width:"300px",onLoad:o,onError:o}),(0,v.jsx)(b,{children:(0,v.jsx)(j,{value:s,text:"".concat(s,"%")})})]}),(0,v.jsx)("h2",{children:t})]})},a)}))})}},3855:function(e,n,t){var r=t(5218),o=t(184);n.Z=function(){return(0,o.jsx)(r.x7,{position:"top-center",reverseOrder:!1})}},8627:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var r,o,a,i=t(3433),s=t(9439),c=t(2791),u=t(1087),l=t(168),p=t(6444),f=p.ZP.form(r||(r=(0,l.Z)(["\n  width: 400px;\n  padding-top: 20px;\n  margin: 0 auto;\n  display: flex;\n  gap: 10px;\n"]))),d=p.ZP.input(o||(o=(0,l.Z)(["\n  width: 100%;\n  padding: 4px 8px;\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  background-color: silver;\n"]))),h=p.ZP.button(a||(a=(0,l.Z)(["\n  padding: 4px 8px;\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  background-color: silver;\n  cursor: pointer;\n  &:hover,\n  &:focus {\n    background-color: tomato;\n  }\n"]))),v=t(184),g=function(e){var n=e.setSearchParams,t=(0,c.useState)(""),r=(0,s.Z)(t,2),o=r[0],a=r[1];return(0,v.jsxs)(f,{onSubmit:function(e){e.preventDefault(),o.trim()&&(n({query:o.trim().toLowerCase()}),a(""))},children:[(0,v.jsx)(d,{type:"text",name:"query",value:o,placeholder:"Search movies",autoComplete:"off",autoFocus:!0,onChange:function(e){var n=e.currentTarget.value;a(n)}}),(0,v.jsx)(h,{type:"submit",children:"Search"})]})},m=t(9021),x=t(3855),Z=t(6481),b=t(7178),w=function(){var e=(0,b.Z)(),n=e.movies,t=e.fetchMoviesList,r=e.isLoading,o=e.setIsLoading,a=(0,c.useRef)(t).current,l=(0,u.lr)(),p=(0,s.Z)(l,2),f=p[0],d=p[1],h=(0,c.useMemo)((function(){return Object.fromEntries((0,i.Z)(f))}),[f]).query;return(0,c.useEffect)((function(){if(h){var e=new AbortController;return a({controller:e,fetchParams:"search/movie",query:h}),function(){e.abort()}}}),[a,h]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g,{setSearchParams:d}),r&&(0,v.jsx)(Z.Z,{}),!!n.length&&(0,v.jsx)(m.Z,{movies:n,setIsLoading:o}),(0,v.jsx)(x.Z,{})]})}},7178:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(9439),o=t(2791),a=t(5861),i=t(4687),s=t.n(i),c=t(1243);c.Z.defaults.baseURL="https://api.themoviedb.org/3/";var u=function(){var e=(0,a.Z)(s().mark((function e(n){var t,r,o,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.fetchParams,r=n.query,o=void 0===r?null:r,a=n.controller,e.next=3,(0,c.Z)(t,{signal:a.signal,params:{api_key:"c095a52b18be81f1ee1fe016a8531acc",query:o}});case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=t(5218),p=function(){var e=(0,o.useState)([]),n=(0,r.Z)(e,2),t=n[0],a=n[1],i=(0,o.useState)(!1),s=(0,r.Z)(i,2),c=s[0],p=s[1],f=(0,o.useState)(null),d=(0,r.Z)(f,2),h=d[0],v=d[1],g=(0,o.useState)([]),m=(0,r.Z)(g,2),x=m[0],Z=m[1],b=(0,o.useState)([]),w=(0,r.Z)(b,2),j=w[0],y=w[1];return{movies:t,fetchMoviesList:function(e){p(!0),u(e).then((function(e){e.results.length||(p(!1),l.ZP.error("Nothing found!"));var n=function(e){return e.map((function(e){var n=e.title,t=e.id,r=e.poster_path,o=e.vote_average;return{title:n,id:t,poster:r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",averageVote:o&&Math.round(10*o)}}))}(e.results);a(n)})).catch((function(e){"canceled"!==e.message&&(p(!1),l.ZP.error(e.message))}))},movie:h,fetchMovie:function(e){p(!0),u(e).then((function(e){v(function(e){var n=e.release_date,t=e.title,r=e.poster_path,o=e.popularity,a=e.backdrop_path,i=e.id,s=e.tagline,c=e.genres,u=e.overview,l=n?n.split("-")[0]:"No release information",p=r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",f=c.map((function(e){return e.name})).join(" ");return{date:l,title:t,tagline:s,id:i,poster:p,popularity:o+"",backdrop_path:a,genre:f.length?f:"No genre information",overview:u}}(e))})).catch((function(e){"canceled"!==e.message&&(p(!1),l.ZP.error(e.message))}))},cast:x,fetchCast:function(e){u(e).then((function(e){Z(function(e){return e.map((function(e){return{id:e.id,name:e.name,original_name:e.original_name,character:e.character,profile_path:e.profile_path}}))}(e.cast)),e.cast.length||l.ZP.error("We don't have any cast for this movie")})).catch((function(e){"canceled"!==e.message&&l.ZP.error(e.message)}))},reviews:j,fetcReviews:function(e){u(e).then((function(e){y(function(e){return e.map((function(e){return{author:e.author,content:e.content,id:e.id}}))}(e.results)),e.results.length||l.ZP.error("We don't have any reviews for this movie")})).catch((function(e){"canceled"!==e.message&&l.ZP.error(e.message)}))},isLoading:c,setIsLoading:p}}}}]);
//# sourceMappingURL=582.035c17ff.chunk.js.map